# Vim Windows & Tabs çª—å£å’Œæ ‡ç­¾é¡µç®¡ç†

Vim æ”¯æŒå¼ºå¤§çš„å¤šçª—å£å’Œæ ‡ç­¾é¡µåŠŸèƒ½ï¼Œæä¾›çµæ´»çš„æ–‡ä»¶ç¼–è¾‘ç¯å¢ƒã€‚æœ¬ç« å°†å…¨é¢ä»‹ç»çª—å£å’Œæ ‡ç­¾é¡µçš„æ¦‚å¿µã€æ“ä½œå’Œæœ€ä½³å®è·µã€‚

## ğŸ“– æ ¸å¿ƒæ¦‚å¿µ

### åŸºæœ¬æ¦‚å¿µå±‚æ¬¡ç»“æ„
```
Vim Instance
â”œâ”€â”€ Tab Page 1 (æ ‡ç­¾é¡µ)
â”‚   â”œâ”€â”€ Window 1 (çª—å£) â†’ Buffer A (ç¼“å†²åŒº)
â”‚   â””â”€â”€ Window 2 (çª—å£) â†’ Buffer B (ç¼“å†²åŒº)
â”œâ”€â”€ Tab Page 2
â”‚   â”œâ”€â”€ Window 1 â†’ Buffer C
â”‚   â”œâ”€â”€ Window 2 â†’ Buffer A (åŒä¸€ç¼“å†²åŒºå¯åœ¨å¤šå¤„æ˜¾ç¤º)
â”‚   â””â”€â”€ Window 3 â†’ Buffer D
```

### å®šä¹‰è¯´æ˜
- **Buffer (ç¼“å†²åŒº)**: å†…å­˜ä¸­æ–‡ä»¶çš„æ–‡æœ¬å†…å®¹
- **Window (çª—å£)**: ç¼“å†²åŒºçš„è§†å£ï¼Œç”¨äºæ˜¾ç¤ºå’Œç¼–è¾‘
- **Tab Page (æ ‡ç­¾é¡µ)**: çª—å£çš„é›†åˆï¼Œç»„ç»‡å·¥ä½œç©ºé—´

---

## ğŸªŸ çª—å£ç®¡ç† (Windows)

### åˆ›å»ºçª—å£

#### åˆ†å±å‘½ä»¤
| å‘½ä»¤ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `:split` / `:sp` | æ°´å¹³åˆ†å±ï¼ˆä¸Šä¸‹ï¼‰ | `:sp file.txt` |
| `:vsplit` / `:vsp` | å‚ç›´åˆ†å±ï¼ˆå·¦å³ï¼‰ | `:vsp config.vim` |
| `:new` | åˆ›å»ºæ–°çš„æ°´å¹³åˆ†å±ï¼ˆç©ºç¼“å†²åŒºï¼‰ | `:new` |
| `:vnew` | åˆ›å»ºæ–°çš„å‚ç›´åˆ†å±ï¼ˆç©ºç¼“å†²åŒºï¼‰ | `:vnew` |

#### å¿«æ·é”®åˆ›å»º
| å¿«æ·é”® | åŠŸèƒ½ | ç­‰åŒå‘½ä»¤ |
|--------|------|----------|
| `Ctrl-w s` | æ°´å¹³åˆ†å± | `:split` |
| `Ctrl-w v` | å‚ç›´åˆ†å± | `:vsplit` |
| `Ctrl-w n` | æ–°å»ºæ°´å¹³åˆ†å± | `:new` |

#### é«˜çº§åˆ†å±é€‰é¡¹
```vim
" æŒ‡å®šçª—å£å¤§å°
:10split file.txt    " åˆ›å»º10è¡Œé«˜çš„æ°´å¹³åˆ†å±
:30vsplit config.vim " åˆ›å»º30åˆ—å®½çš„å‚ç›´åˆ†å±

" æ§åˆ¶åˆ†å±æ–¹å‘
:set splitbelow      " æ–°æ°´å¹³åˆ†å±åœ¨ä¸‹æ–¹
:set splitright      " æ–°å‚ç›´åˆ†å±åœ¨å³ä¾§

" åˆ†å±ä¿®é¥°ç¬¦
:vertical split      " å¼ºåˆ¶å‚ç›´åˆ†å±
:topleft split       " åœ¨é¡¶éƒ¨å…¨å®½åˆ†å±
:botright vsplit     " åœ¨å³ä¾§å…¨é«˜åˆ†å±
```

### çª—å£å¯¼èˆª

#### åŸºç¡€ç§»åŠ¨ (Vimå¼)
| å¿«æ·é”® | æ–¹å‘ | è®°å¿†æ–¹å¼ |
|--------|------|----------|
| `Ctrl-w h` | â† å·¦çª—å£ | **h**eft (å·¦) |
| `Ctrl-w j` | â†“ ä¸‹çª—å£ | **j**own (ä¸‹) |
| `Ctrl-w k` | â†‘ ä¸Šçª—å£ | **k**p (ä¸Š) |
| `Ctrl-w l` | â†’ å³çª—å£ | **l**ight (å³) |

#### å¾ªç¯å¯¼èˆª
| å¿«æ·é”® | åŠŸèƒ½ |
|--------|------|
| `Ctrl-w w` | é¡ºæ—¶é’ˆåˆ‡æ¢çª—å£ |
| `Ctrl-w W` | é€†æ—¶é’ˆåˆ‡æ¢çª—å£ |
| `Ctrl-w t` | è·³è½¬åˆ°æœ€é¡¶éƒ¨çª—å£ |
| `Ctrl-w b` | è·³è½¬åˆ°æœ€åº•éƒ¨çª—å£ |
| `Ctrl-w p` | è·³è½¬åˆ°ä¸Šä¸€ä¸ªè®¿é—®çš„çª—å£ |

#### ç¼–å·å¯¼èˆª
```vim
" æŒ‰ç¼–å·è·³è½¬
Ctrl-w 1 w    " è·³è½¬åˆ°ç¬¬1ä¸ªçª—å£
Ctrl-w 2 w    " è·³è½¬åˆ°ç¬¬2ä¸ªçª—å£
:1wincmd w    " å‘½ä»¤è¡Œæ–¹å¼è·³è½¬åˆ°ç¬¬1ä¸ªçª—å£
```

### çª—å£å¤§å°è°ƒæ•´

#### é«˜åº¦è°ƒæ•´
| å¿«æ·é”® | åŠŸèƒ½ | è¯´æ˜ |
|--------|------|------|
| `Ctrl-w =` | å‡è¡¡æ‰€æœ‰çª—å£å¤§å° | æ¨èå¸¸ç”¨ |
| `Ctrl-w +` | å¢åŠ å½“å‰çª—å£é«˜åº¦ | é»˜è®¤å¢åŠ 1è¡Œ |
| `Ctrl-w -` | å‡å°‘å½“å‰çª—å£é«˜åº¦ | é»˜è®¤å‡å°‘1è¡Œ |
| `Ctrl-w _` | æœ€å¤§åŒ–å½“å‰çª—å£é«˜åº¦ | |

#### å®½åº¦è°ƒæ•´
| å¿«æ·é”® | åŠŸèƒ½ |
|--------|------|
| `Ctrl-w >` | å¢åŠ å½“å‰çª—å£å®½åº¦ |
| `Ctrl-w <` | å‡å°‘å½“å‰çª—å£å®½åº¦ |
| `Ctrl-w \|` | æœ€å¤§åŒ–å½“å‰çª—å£å®½åº¦ |

#### ç²¾ç¡®è°ƒæ•´
```vim
:resize 20           " è®¾ç½®é«˜åº¦ä¸º20è¡Œ
:vertical resize 80  " è®¾ç½®å®½åº¦ä¸º80åˆ—
:10winc +           " å¢åŠ 10è¡Œé«˜åº¦
:5winc >            " å¢åŠ 5åˆ—å®½åº¦
```

### çª—å£å¸ƒå±€ç®¡ç†

#### ç§»åŠ¨å’Œé‡æ’
| å¿«æ·é”® | åŠŸèƒ½ |
|--------|------|
| `Ctrl-w r` | é¡ºæ—¶é’ˆæ—‹è½¬çª—å£ |
| `Ctrl-w R` | é€†æ—¶é’ˆæ—‹è½¬çª—å£ |
| `Ctrl-w x` | äº¤æ¢å½“å‰çª—å£ä¸ä¸‹ä¸€ä¸ªçª—å£ |

#### çª—å£ä½ç½®è°ƒæ•´
| å¿«æ·é”® | åŠŸèƒ½ |
|--------|------|
| `Ctrl-w H` | ç§»åŠ¨åˆ°æœ€å·¦ä¾§ï¼ˆå…¨é«˜ï¼‰ |
| `Ctrl-w J` | ç§»åŠ¨åˆ°æœ€åº•éƒ¨ï¼ˆå…¨å®½ï¼‰ |
| `Ctrl-w K` | ç§»åŠ¨åˆ°æœ€é¡¶éƒ¨ï¼ˆå…¨å®½ï¼‰ |
| `Ctrl-w L` | ç§»åŠ¨åˆ°æœ€å³ä¾§ï¼ˆå…¨é«˜ï¼‰ |

### å…³é—­çª—å£
| å¿«æ·é”® | åŠŸèƒ½ | è¯´æ˜ |
|--------|------|------|
| `Ctrl-w c` | å…³é—­å½“å‰çª—å£ | close |
| `Ctrl-w o` | åªä¿ç•™å½“å‰çª—å£ | only |
| `Ctrl-w q` | é€€å‡ºå½“å‰çª—å£ | quit |
| `:q` | é€€å‡ºçª—å£/Vim | æœ€åä¸€ä¸ªçª—å£æ—¶é€€å‡ºVim |

---

## ğŸ“‘ æ ‡ç­¾é¡µç®¡ç† (Tab Pages)

### æ ‡ç­¾é¡µæ¦‚å¿µ
æ ‡ç­¾é¡µæ˜¯çª—å£é›†åˆçš„å®¹å™¨ï¼Œç”¨äºç»„ç»‡ä¸åŒçš„å·¥ä½œç¯å¢ƒã€‚æ¯ä¸ªæ ‡ç­¾é¡µå¯ä»¥åŒ…å«å¤šä¸ªçª—å£ï¼Œçª—å£ä¹‹é—´å¯ä»¥æ˜¾ç¤ºä¸åŒçš„ç¼“å†²åŒºã€‚

### åˆ›å»ºæ ‡ç­¾é¡µ

#### åŸºç¡€å‘½ä»¤
| å‘½ä»¤ | åŠŸèƒ½ | ç¤ºä¾‹ |
|------|------|------|
| `:tabnew` | åˆ›å»ºæ–°æ ‡ç­¾é¡µï¼ˆç©ºï¼‰ | `:tabnew` |
| `:tabedit file` | åˆ›å»ºæ ‡ç­¾é¡µå¹¶æ‰“å¼€æ–‡ä»¶ | `:tabe config.vim` |
| `:tabfind file` | åœ¨è·¯å¾„ä¸­æŸ¥æ‰¾æ–‡ä»¶å¹¶åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€ | `:tabf *.py` |

#### ä½ç½®æ§åˆ¶
```vim
:tabnew            " åœ¨å½“å‰æ ‡ç­¾é¡µååˆ›å»º
:0tabnew           " åœ¨æœ€å‰é¢åˆ›å»º
:$tabnew           " åœ¨æœ€åé¢åˆ›å»º
:+tabnew           " åœ¨ä¸‹ä¸€ä¸ªä½ç½®åˆ›å»º
:-tabnew           " åœ¨å‰ä¸€ä¸ªä½ç½®åˆ›å»º
```

#### ç»„åˆå‘½ä»¤
```vim
:tab split         " åœ¨æ–°æ ‡ç­¾é¡µä¸­åˆ†å±
:tab help          " åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€å¸®åŠ©
:tab ball          " ä¸ºæ¯ä¸ªç¼“å†²åŒºåˆ›å»ºæ ‡ç­¾é¡µ
```

### æ ‡ç­¾é¡µå¯¼èˆª

#### å¿«æ·é”®å¯¼èˆª
| å¿«æ·é”® | åŠŸèƒ½ | è¯´æ˜ |
|--------|------|------|
| `gt` | ä¸‹ä¸€ä¸ªæ ‡ç­¾é¡µ | **g**o **t**ab |
| `gT` | ä¸Šä¸€ä¸ªæ ‡ç­¾é¡µ | **g**o **T**ab (åå‘) |
| `{count}gt` | è·³è½¬åˆ°ç¬¬Nä¸ªæ ‡ç­¾é¡µ | `2gt` è·³è½¬åˆ°ç¬¬2ä¸ª |

#### å‘½ä»¤å¯¼èˆª
| å‘½ä»¤ | å¿«æ·é”® | åŠŸèƒ½ |
|------|--------|------|
| `:tabnext` / `:tabn` | `gt` | ä¸‹ä¸€ä¸ªæ ‡ç­¾é¡µ |
| `:tabprevious` / `:tabp` | `gT` | ä¸Šä¸€ä¸ªæ ‡ç­¾é¡µ |
| `:tabfirst` | | ç¬¬ä¸€ä¸ªæ ‡ç­¾é¡µ |
| `:tablast` | | æœ€åä¸€ä¸ªæ ‡ç­¾é¡µ |

#### é¼ æ ‡æ“ä½œ
- **ç‚¹å‡»æ ‡ç­¾**: åˆ‡æ¢åˆ°å¯¹åº”æ ‡ç­¾é¡µ
- **ä¸­é”®ç‚¹å‡»**: å…³é—­æ ‡ç­¾é¡µ
- **å³é”®ç‚¹å‡»**: æ‰“å¼€ä¸Šä¸‹æ–‡èœå•

### æ ‡ç­¾é¡µç®¡ç†

#### å…³é—­æ ‡ç­¾é¡µ
| å‘½ä»¤ | åŠŸèƒ½ |
|------|------|
| `:tabclose` | å…³é—­å½“å‰æ ‡ç­¾é¡µ |
| `:tabonly` | åªä¿ç•™å½“å‰æ ‡ç­¾é¡µ |
| `:{N}tabclose` | å…³é—­ç¬¬Nä¸ªæ ‡ç­¾é¡µ |
| `:tabclose!` | å¼ºåˆ¶å…³é—­ï¼ˆå¿½ç•¥æœªä¿å­˜æ›´æ”¹ï¼‰ |

#### é‡æ–°æ’åº
```vim
:tabmove          " ç§»åŠ¨åˆ°æœ€å
:tabmove 0        " ç§»åŠ¨åˆ°æœ€å‰
:tabmove 2        " ç§»åŠ¨åˆ°ç¬¬3ä¸ªä½ç½®ï¼ˆä»0å¼€å§‹ï¼‰
:tabmove +1       " å‘åç§»åŠ¨1ä¸ªä½ç½®
:tabmove -1       " å‘å‰ç§»åŠ¨1ä¸ªä½ç½®
```

#### ä¿¡æ¯æŸ¥çœ‹
```vim
:tabs             " åˆ—å‡ºæ‰€æœ‰æ ‡ç­¾é¡µå’Œçª—å£
:echo tabpagenr() " å½“å‰æ ‡ç­¾é¡µç¼–å·
:echo tabpagenr('$') " æ€»æ ‡ç­¾é¡µæ•°
```

---

## ğŸ”§ å®ç”¨æŠ€å·§å’Œæœ€ä½³å®è·µ

### å·¥ä½œæµå»ºè®®

#### é¡¹ç›®ç»„ç»‡ç­–ç•¥
```vim
" æ–¹æ¡ˆ1: æŒ‰é¡¹ç›®åˆ†æ ‡ç­¾é¡µ
Tab1: é¡¹ç›®A (å¤šä¸ªç›¸å…³æ–‡ä»¶çš„çª—å£)
Tab2: é¡¹ç›®B (å¤šä¸ªç›¸å…³æ–‡ä»¶çš„çª—å£)
Tab3: é…ç½®æ–‡ä»¶ (vimrc, bashrcç­‰)

" æ–¹æ¡ˆ2: æŒ‰åŠŸèƒ½åˆ†æ ‡ç­¾é¡µ
Tab1: ç¼–è¾‘ (æºä»£ç æ–‡ä»¶)
Tab2: è°ƒè¯• (æ—¥å¿—ã€è¾“å‡ºçª—å£)
Tab3: æ–‡æ¡£ (README, å¸®åŠ©æ–‡æ¡£)
```

#### å¸¸ç”¨ç»„åˆæ“ä½œ
```vim
" å¿«é€Ÿå¯¹æ¯”æ–‡ä»¶
:vsp file1.txt | wincmd l | edit file2.txt

" åœ¨æ–°æ ‡ç­¾é¡µä¸­åˆ†å±å¯¹æ¯”
:tab split | vsp other_file.txt

" ä¸´æ—¶æŸ¥çœ‹æ–‡ä»¶åå›åˆ°å·¥ä½œç¯å¢ƒ
:tabnew | edit temp_file.txt | tabclose
```

### è‡ªå®šä¹‰é…ç½®

#### åŸºç¡€è®¾ç½®
```vim
" åˆ†å±è¡Œä¸º
set splitbelow      " æ–°æ°´å¹³åˆ†å±åœ¨ä¸‹æ–¹
set splitright      " æ–°å‚ç›´åˆ†å±åœ¨å³ä¾§
set equalalways     " è‡ªåŠ¨è°ƒæ•´çª—å£å¤§å°

" æ ‡ç­¾é¡µæ˜¾ç¤º
set showtabline=2   " å§‹ç»ˆæ˜¾ç¤ºæ ‡ç­¾æ 
set tabpagemax=15   " æœ€å¤§æ ‡ç­¾é¡µæ•°

" çŠ¶æ€æ æ˜¾ç¤ºçª—å£ä¿¡æ¯
set laststatus=2    " å§‹ç»ˆæ˜¾ç¤ºçŠ¶æ€æ 
```

#### ä¾¿æ·å¿«æ·é”®
```vim
" æ ‡ç­¾é¡µå¿«æ·é”®
nnoremap <leader>tn :tabnew<CR>
nnoremap <leader>tc :tabclose<CR>
nnoremap <leader>to :tabonly<CR>
nnoremap <leader>tm :tabmove<Space>

" çª—å£å¿«æ·é”®
nnoremap <leader>wv :vsplit<CR>
nnoremap <leader>ws :split<CR>
nnoremap <leader>wc :close<CR>
nnoremap <leader>wo :only<CR>

" çª—å£å¤§å°è°ƒæ•´
nnoremap <C-Up>    :resize +2<CR>
nnoremap <C-Down>  :resize -2<CR>
nnoremap <C-Left>  :vertical resize -2<CR>
nnoremap <C-Right> :vertical resize +2<CR>
```

#### æ™ºèƒ½çª—å£å¯¼èˆª
```vim
" æ›´æ™ºèƒ½çš„çª—å£åˆ‡æ¢
function! SmartMove(direction)
  let t:curwin = winnr()
  exec "wincmd ".a:direction
  if (t:curwin == winnr())
    if (match(a:direction,'[jk]'))
      wincmd v
    else
      wincmd s
    endif
    exec "wincmd ".a:direction
  endif
endfunction

nnoremap <silent> <C-h> :call SmartMove('h')<CR>
nnoremap <silent> <C-j> :call SmartMove('j')<CR>
nnoremap <silent> <C-k> :call SmartMove('k')<CR>
nnoremap <silent> <C-l> :call SmartMove('l')<CR>
```

### é«˜çº§ç”¨æ³•

#### ä¼šè¯ç®¡ç†
```vim
" ä¿å­˜çª—å£å¸ƒå±€
:mksession project.vim

" æ¢å¤å¸ƒå±€
:source project.vim
" æˆ–å¯åŠ¨æ—¶: vim -S project.vim
```

#### æ‰¹é‡æ“ä½œ
```vim
" åœ¨æ‰€æœ‰çª—å£ä¸­æ‰§è¡Œå‘½ä»¤
:windo set number

" åœ¨æ‰€æœ‰æ ‡ç­¾é¡µä¸­æ‰§è¡Œå‘½ä»¤
:tabdo echo "Processing tab"

" åœ¨æ‰€æœ‰ç¼“å†²åŒºä¸­æ‰§è¡Œå‘½ä»¤
:bufdo %s/old/new/g
```

#### çª—å£è‡ªåŠ¨åŒ–
```vim
" è‡ªåŠ¨å‘½ä»¤ç¤ºä¾‹
augroup WindowManagement
  autocmd!
  " æ‰“å¼€æ–‡ä»¶æ—¶è‡ªåŠ¨è°ƒæ•´çª—å£å¤§å°
  autocmd VimResized * wincmd =
  
  " ç¦»å¼€çª—å£æ—¶ä¿å­˜
  autocmd BufLeave * if &modified && &buftype == '' | write | endif
  
  " åªå‰©ä¸€ä¸ªçª—å£æ—¶è‡ªåŠ¨å…³é—­æ ‡ç­¾é¡µ
  autocmd WinEnter * if winnr('$') == 1 && tabpagenr('$') > 1 | tabclose | endif
augroup END
```

---

## âš¡ å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### æ€§èƒ½ä¼˜åŒ–
```vim
" é™åˆ¶åŒæ—¶æ‰“å¼€çš„æ ‡ç­¾é¡µæ•°é‡
set tabpagemax=10

" ä¼˜åŒ–å¤§æ–‡ä»¶çš„çª—å£æ“ä½œ
if has('autocmd')
  filetype plugin indent on
endif
```

### å…¼å®¹æ€§è®¾ç½®
```vim
" ç¡®ä¿ç»ˆç«¯æ”¯æŒ
if &term =~ "xterm"
  set t_Co=256
endif

" GUIç‰¹å®šè®¾ç½®
if has('gui_running')
  set guitablabel=%t
endif
```

### æ•…éšœæ’é™¤

#### å¸¸è§é—®é¢˜
1. **çª—å£æ— æ³•åˆ›å»º**: æ£€æŸ¥ `winminheight` å’Œ `winminwidth` è®¾ç½®
2. **æ ‡ç­¾é¡µä¸æ˜¾ç¤º**: æ£€æŸ¥ `showtabline` è®¾ç½®
3. **å¿«æ·é”®å†²çª**: ä½¿ç”¨ `:verbose map <key>` æ£€æŸ¥æ˜ å°„

#### è°ƒè¯•å‘½ä»¤
```vim
:verbose set splitbelow?  " æ£€æŸ¥é€‰é¡¹è®¾ç½®åŠæ¥æº
:ls                       " æŸ¥çœ‹ç¼“å†²åŒºåˆ—è¡¨
:windows                  " æŸ¥çœ‹çª—å£ä¿¡æ¯
:tabs                     " æŸ¥çœ‹æ ‡ç­¾é¡µä¿¡æ¯
```

---

## ğŸ“š è¿›é˜¶å­¦ä¹ 

### ç›¸å…³ä¸»é¢˜
- Buffer ç®¡ç†: `:help buffer-list`
- ä¼šè¯ç®¡ç†: `:help session`
- æ’ä»¶æ¨è: vim-airline, vim-tabular
- çª—å£ç®¡ç†å™¨æ’ä»¶: winresizer, golden-ratio

### å‚è€ƒæ–‡æ¡£
```vim
:help windows          " çª—å£ç›¸å…³å¸®åŠ©
:help tabpage          " æ ‡ç­¾é¡µç›¸å…³å¸®åŠ©
:help window-moving    " çª—å£ç§»åŠ¨
:help window-resize    " çª—å£å¤§å°è°ƒæ•´
```

é€šè¿‡æŒæ¡è¿™äº›çª—å£å’Œæ ‡ç­¾é¡µçš„ç®¡ç†æŠ€å·§ï¼Œä½ å°†èƒ½å¤Ÿåœ¨ Vim ä¸­æ„å»ºé«˜æ•ˆçš„å¤šæ–‡ä»¶ç¼–è¾‘ç¯å¢ƒï¼Œå¤§å¹…æå‡ç¼–ç¨‹å’Œæ–‡æœ¬ç¼–è¾‘çš„æ•ˆç‡ã€‚
