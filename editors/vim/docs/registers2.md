# Vim å¯„å­˜å™¨å®Œå…¨æŒ‡å— (Registers Complete Guide)

> **æ–‡æ¡£è¯´æ˜**: æœ¬æ–‡æ¡£åŸºäºVimå®˜æ–¹æ–‡æ¡£é‡æ–°è®¾è®¡ï¼Œæä¾›æ›´ç°ä»£åŒ–çš„ç»“æ„å’Œå®ç”¨çš„å­¦ä¹ è·¯å¾„ã€‚

## ğŸ“‹ ç›®å½•

1. [å¯„å­˜å™¨æ¦‚å¿µä¸æ ¸å¿ƒåŸç†](#å¯„å­˜å™¨æ¦‚å¿µä¸æ ¸å¿ƒåŸç†)
2. [å¯„å­˜å™¨ç±»å‹ä½“ç³»](#å¯„å­˜å™¨ç±»å‹ä½“ç³»)
3. [æ“ä½œæ¨¡å¼ä¸è¯­æ³•](#æ“ä½œæ¨¡å¼ä¸è¯­æ³•)
4. [å®æˆ˜åº”ç”¨åœºæ™¯](#å®æˆ˜åº”ç”¨åœºæ™¯)
5. [é«˜çº§æŠ€å·§ä¸æœ€ä½³å®è·µ](#é«˜çº§æŠ€å·§ä¸æœ€ä½³å®è·µ)
6. [æ•…éšœæ’é™¤ä¸å¸¸è§é—®é¢˜](#æ•…éšœæ’é™¤ä¸å¸¸è§é—®é¢˜)
7. [å‚è€ƒèµ„æ–™ä¸æ‰©å±•](#å‚è€ƒèµ„æ–™ä¸æ‰©å±•)

---

## ğŸ¯ å¯„å­˜å™¨æ¦‚å¿µä¸æ ¸å¿ƒåŸç†

### ä»€ä¹ˆæ˜¯Vimå¯„å­˜å™¨ï¼Ÿ

Vimå¯„å­˜å™¨æ˜¯ä¸€å¥—é«˜åº¦çµæ´»çš„**æ–‡æœ¬å­˜å‚¨ç³»ç»Ÿ**ï¼Œè¿œæ¯”ä¼ ç»Ÿå‰ªè´´æ¿å¼ºå¤§ï¼š

- ğŸ“¦ **å¤šé‡å­˜å‚¨ç©ºé—´**: æä¾›26ä¸ªå‘½åå¯„å­˜å™¨ + 10ä¸ªæ•°å­—å¯„å­˜å™¨ + å¤šä¸ªç‰¹æ®Šå¯„å­˜å™¨
- ğŸ”„ **æ™ºèƒ½åˆ†ç±»ç®¡ç†**: è‡ªåŠ¨åŒºåˆ†å¤åˆ¶ã€åˆ é™¤ã€å°ç‰‡æ®µç­‰ä¸åŒç±»å‹çš„æ“ä½œ
- ğŸŒ **ç³»ç»Ÿé›†æˆ**: ä¸æ“ä½œç³»ç»Ÿå‰ªè´´æ¿æ— ç¼äº¤äº’
- âš¡ **é«˜æ•ˆè®¿é—®**: é€šè¿‡ç®€æ´çš„é”®ä½ç»„åˆå¿«é€Ÿæ“ä½œ

### æ ¸å¿ƒè®¾è®¡ç†å¿µ

```mermaid
graph TD
    A[æ–‡æœ¬æ“ä½œ] --> B{æ“ä½œç±»å‹}
    B -->|å¤åˆ¶ yank| C[å­˜å‚¨åˆ°å¯„å­˜å™¨]
    B -->|åˆ é™¤ delete| D[å­˜å‚¨åˆ°å¯„å­˜å™¨]
    B -->|å‰ªåˆ‡ change| E[å­˜å‚¨åˆ°å¯„å­˜å™¨]
    
    C --> F[å¯„å­˜å™¨é€‰æ‹©ç­–ç•¥]
    D --> F
    E --> F
    
    F --> G[é»˜è®¤å¯„å­˜å™¨]
    F --> H[æŒ‡å®šå¯„å­˜å™¨]
    F --> I[ç‰¹æ®Šå¯„å­˜å™¨]
    
    G --> J[ç²˜è´´ä½¿ç”¨]
    H --> J
    I --> J
```

### å¯„å­˜å™¨æ“ä½œçš„ä¸‰å¤§ç»´åº¦

| ç»´åº¦ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **å­˜å‚¨ç»´åº¦** | å†³å®šå†…å®¹å¦‚ä½•è¢«ä¿å­˜ | `yy` (å¤åˆ¶), `dd` (åˆ é™¤), `cc` (å‰ªåˆ‡) |
| **é€‰æ‹©ç»´åº¦** | å†³å®šä½¿ç”¨å“ªä¸ªå¯„å­˜å™¨ | `"a` (å‘½å), `"0` (æ•°å­—), `"+` (ç³»ç»Ÿ) |
| **ä½¿ç”¨ç»´åº¦** | å†³å®šå¦‚ä½•å–å‡ºå†…å®¹ | `p` (ç²˜è´´), `P` (å‰ç½®ç²˜è´´), `<C-r>` (æ’å…¥) |

---

## ğŸ—‚ï¸ å¯„å­˜å™¨ç±»å‹ä½“ç³»

### åˆ†ç±»æ€»è§ˆ

```
å¯„å­˜å™¨ç±»å‹ä½“ç³»
â”œâ”€â”€ é»˜è®¤å¯„å­˜å™¨ (Default)
â”‚   â””â”€â”€ æœªå‘½åå¯„å­˜å™¨ "" 
â”œâ”€â”€ ç”¨æˆ·å¯„å­˜å™¨ (User Controlled)
â”‚   â”œâ”€â”€ å‘½åå¯„å­˜å™¨ "a-"z, "A-"Z
â”‚   â””â”€â”€ æ•°å­—å¯„å­˜å™¨ "0-"9, "-
â”œâ”€â”€ ç³»ç»Ÿå¯„å­˜å™¨ (System)
â”‚   â”œâ”€â”€ å‰ªè´´æ¿å¯„å­˜å™¨ "+, "*
â”‚   â””â”€â”€ é€‰æ‹©å¯„å­˜å™¨ "~
â”œâ”€â”€ åªè¯»å¯„å­˜å™¨ (Read-Only)
â”‚   â”œâ”€â”€ æ–‡ä»¶å¯„å­˜å™¨ "%
â”‚   â”œâ”€â”€ å‘½ä»¤å¯„å­˜å™¨ ":
â”‚   â””â”€â”€ æ’å…¥å¯„å­˜å™¨ ".
â”œâ”€â”€ åŠŸèƒ½å¯„å­˜å™¨ (Functional)
â”‚   â”œâ”€â”€ è¡¨è¾¾å¼å¯„å­˜å™¨ "=
â”‚   â”œâ”€â”€ æœç´¢å¯„å­˜å™¨ "/
â”‚   â””â”€â”€ é»‘æ´å¯„å­˜å™¨ "_
```

### 1ï¸âƒ£ é»˜è®¤å¯„å­˜å™¨ (Default Register)

#### æœªå‘½åå¯„å­˜å™¨ `""`

```vim
" ç‰¹ç‚¹: æ‰€æœ‰ yank/delete/change æ“ä½œçš„é»˜è®¤å­˜å‚¨ä½ç½®
yy          " å¤åˆ¶å½“å‰è¡Œ â†’ å­˜å‚¨åˆ° ""
dd          " åˆ é™¤å½“å‰è¡Œ â†’ å­˜å‚¨åˆ° "" 
p           " ç²˜è´´ "" å†…å®¹ (ç­‰åŒäº ""p)

" æŸ¥çœ‹å†…å®¹
:reg ""
```

**ğŸ’¡ ä½¿ç”¨è¦ç‚¹:**
- æœ€å¸¸ç”¨ï¼Œæ— éœ€æŒ‡å®šå¯„å­˜å™¨å
- ä¼šè¢«æ¯æ¬¡æ“ä½œè¦†ç›–
- `p` å‘½ä»¤é»˜è®¤ä½¿ç”¨æ­¤å¯„å­˜å™¨

### 2ï¸âƒ£ å‘½åå¯„å­˜å™¨ (Named Registers)

#### å°å†™å¯„å­˜å™¨ `"a` - `"z` (è¦†ç›–æ¨¡å¼)

```vim
" è¦†ç›–å­˜å‚¨: æ–°å†…å®¹æ›¿æ¢æ—§å†…å®¹
"ayy        " å¤åˆ¶å½“å‰è¡Œåˆ°å¯„å­˜å™¨ a
"bdd        " åˆ é™¤å½“å‰è¡Œåˆ°å¯„å­˜å™¨ b  
"ap         " ç²˜è´´å¯„å­˜å™¨ a çš„å†…å®¹
"bp         " ç²˜è´´å¯„å­˜å™¨ b çš„å†…å®¹
```

#### å¤§å†™å¯„å­˜å™¨ `"A` - `"Z` (è¿½åŠ æ¨¡å¼)

```vim
" è¿½åŠ å­˜å‚¨: æ–°å†…å®¹è¿½åŠ åˆ°å·²æœ‰å†…å®¹å
"ayy        " é¦–æ¬¡: å¤åˆ¶å½“å‰è¡Œåˆ°å¯„å­˜å™¨ a
"Ayy        " è¿½åŠ : å°†å½“å‰è¡Œè¿½åŠ åˆ°å¯„å­˜å™¨ a
"ap         " ç²˜è´´: è¾“å‡ºä¸¤è¡Œå†…å®¹
```

**ğŸ¯ å®æˆ˜åœºæ™¯:**
```vim
" åœºæ™¯: æ”¶é›†å¤šä¸ªå‡½æ•°å®šä¹‰
/^function  " æœç´¢å‡½æ•°
"ayy        " å¤åˆ¶ç¬¬ä¸€ä¸ªå‡½æ•°åˆ°å¯„å­˜å™¨a
n           " ä¸‹ä¸€ä¸ªåŒ¹é…
"Ayy        " è¿½åŠ ç¬¬äºŒä¸ªå‡½æ•°
n           " ç»§ç»­...
"Ayy        " è¿½åŠ ç¬¬ä¸‰ä¸ªå‡½æ•°
"ap         " ä¸€æ¬¡æ€§ç²˜è´´æ‰€æœ‰æ”¶é›†çš„å‡½æ•°
```

### 3ï¸âƒ£ æ•°å­—å¯„å­˜å™¨ (Numbered Registers)

#### å¤åˆ¶å¯„å­˜å™¨ `"0`

```vim
" ç‰¹ç‚¹: ä»…å­˜å‚¨æœ€è¿‘çš„ yank æ“ä½œï¼Œä¸å— delete/change å½±å“
yy          " å¤åˆ¶æ“ä½œ â†’ åŒæ—¶å­˜å‚¨åˆ° "" å’Œ "0
dd          " åˆ é™¤æ“ä½œ â†’ ä»…å­˜å‚¨åˆ° ""ï¼Œ"0 ä¿æŒä¸å˜
"0p         " ç²˜è´´æœ€è¿‘çš„å¤åˆ¶å†…å®¹
```

#### åˆ é™¤å†å²å¯„å­˜å™¨ `"1` - `"9`

```vim
" ç‰¹ç‚¹: è‡ªåŠ¨ç»´æŠ¤åˆ é™¤æ“ä½œçš„å†å²è®°å½•
dd          " åˆ é™¤è¡Œ1 â†’ å­˜å‚¨åˆ° "1
dd          " åˆ é™¤è¡Œ2 â†’ è¡Œ2å­˜å‚¨åˆ°"1ï¼Œè¡Œ1ç§»åŠ¨åˆ°"2
dd          " åˆ é™¤è¡Œ3 â†’ è¡Œ3å­˜å‚¨åˆ°"1ï¼Œè¡Œ2ç§»åŠ¨åˆ°"2ï¼Œè¡Œ1ç§»åŠ¨åˆ°"3

" è®¿é—®å†å²åˆ é™¤
"1p         " ç²˜è´´æœ€è¿‘åˆ é™¤çš„å†…å®¹
"2p         " ç²˜è´´å€’æ•°ç¬¬äºŒæ¬¡åˆ é™¤çš„å†…å®¹
u           " æ’¤é”€
"3p         " ç²˜è´´å€’æ•°ç¬¬ä¸‰æ¬¡åˆ é™¤çš„å†…å®¹
```

#### å°åˆ é™¤å¯„å­˜å™¨ `"-`

```vim
" ç‰¹ç‚¹: å­˜å‚¨å°‘äºä¸€è¡Œçš„åˆ é™¤æ“ä½œ
diw         " åˆ é™¤å½“å‰å•è¯ â†’ å­˜å‚¨åˆ° "-
x           " åˆ é™¤å•ä¸ªå­—ç¬¦ â†’ å­˜å‚¨åˆ° "-
"-p         " ç²˜è´´å°ç‰‡æ®µå†…å®¹
```

**ğŸ“Š æ•°å­—å¯„å­˜å™¨ä¼˜å…ˆçº§:**

| æ“ä½œç±»å‹ | å­˜å‚¨ä½ç½® | è¯´æ˜ |
|----------|----------|------|
| `yy` (æ•´è¡Œå¤åˆ¶) | `""` + `"0` | åŒé‡å­˜å‚¨ |
| `y2w` (å¤åˆ¶2ä¸ªå•è¯) | `""` + `"0` | åŒé‡å­˜å‚¨ |
| `dd` (æ•´è¡Œåˆ é™¤) | `""` + `"1` | æ¨å…¥åˆ é™¤å†å² |
| `d2w` (åˆ é™¤2ä¸ªå•è¯) | `""` + `"1` | æ¨å…¥åˆ é™¤å†å² |
| `diw` (åˆ é™¤å•è¯) | `""` + `"-` | å°åˆ é™¤ |
| `x` (åˆ é™¤å­—ç¬¦) | `""` + `"-` | å°åˆ é™¤ |

### 4ï¸âƒ£ ç³»ç»Ÿé›†æˆå¯„å­˜å™¨ (System Integration)

#### ç³»ç»Ÿå‰ªè´´æ¿å¯„å­˜å™¨ `"+` å’Œ `"*`

```vim
" æ£€æŸ¥å‰ªè´´æ¿æ”¯æŒ
:echo has('clipboard')    " è¿”å› 1 è¡¨ç¤ºæ”¯æŒ

" ç³»ç»Ÿå‰ªè´´æ¿æ“ä½œ
"+yy        " å¤åˆ¶å½“å‰è¡Œåˆ°ç³»ç»Ÿå‰ªè´´æ¿
"+p         " ä»ç³»ç»Ÿå‰ªè´´æ¿ç²˜è´´

" é¼ æ ‡é€‰æ‹©å‰ªè´´æ¿ (X11ç³»ç»Ÿ)
"*yy        " å¤åˆ¶åˆ°é¼ æ ‡ä¸­é”®å‰ªè´´æ¿  
"*p         " ä»é¼ æ ‡ä¸­é”®å‰ªè´´æ¿ç²˜è´´
```

**ğŸ”§ ç³»ç»Ÿå‰ªè´´æ¿é…ç½®:**
```vim
" åœ¨ .vimrc ä¸­è®¾ç½®
set clipboard=unnamed      " ä½¿ç”¨ "* å¯„å­˜å™¨ä½œä¸ºé»˜è®¤
" æˆ–
set clipboard=unnamedplus  " ä½¿ç”¨ "+ å¯„å­˜å™¨ä½œä¸ºé»˜è®¤
" æˆ–  
set clipboard=unnamed,unnamedplus  " ä¸¤è€…éƒ½ä½¿ç”¨
```

### 5ï¸âƒ£ åªè¯»ä¿¡æ¯å¯„å­˜å™¨ (Read-Only Registers)

#### æ–‡ä»¶è·¯å¾„å¯„å­˜å™¨ `"%`

```vim
" è‡ªåŠ¨åŒ…å«å½“å‰æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„
:echo @%        " æ˜¾ç¤º: path/to/current/file.txt
"%p             " ç²˜è´´å½“å‰æ–‡ä»¶è·¯å¾„
```

#### å‘½ä»¤å†å²å¯„å­˜å™¨ `":`

```vim
" è‡ªåŠ¨åŒ…å«æœ€åæ‰§è¡Œçš„å‘½ä»¤è¡Œå‘½ä»¤
:echo "Hello"   " æ‰§è¡Œå‘½ä»¤
:echo @:        " æ˜¾ç¤º: echo "Hello"
":p             " ç²˜è´´æœ€åçš„å‘½ä»¤
```

#### æœ€åæ’å…¥å¯„å­˜å™¨ `".`

```vim
" è‡ªåŠ¨åŒ…å«æœ€åæ’å…¥æ¨¡å¼ä¸­æ’å…¥çš„æ–‡æœ¬
i Hello World <Esc>    " æ’å…¥æ–‡æœ¬
:echo @.               " æ˜¾ç¤º: Hello World
".p                    " ç²˜è´´æœ€åæ’å…¥çš„æ–‡æœ¬
```

### 6ï¸âƒ£ ç‰¹æ®ŠåŠŸèƒ½å¯„å­˜å™¨ (Special Function Registers)

#### è¡¨è¾¾å¼å¯„å­˜å™¨ `"=`

```vim
" åœ¨æ’å…¥æ¨¡å¼ä¸­ä½¿ç”¨
i<C-r>=5+3<CR>         " æ’å…¥è®¡ç®—ç»“æœ: 8
i<C-r>=strftime("%Y-%m-%d")<CR>  " æ’å…¥å½“å‰æ—¥æœŸ

" åœ¨æ™®é€šæ¨¡å¼ä¸­ä½¿ç”¨  
"=5+3<CR>p             " è®¡ç®—å¹¶ç²˜è´´ç»“æœ
"=system('date')<CR>p  " æ‰§è¡Œç³»ç»Ÿå‘½ä»¤å¹¶ç²˜è´´ç»“æœ
```

#### æœç´¢æ¨¡å¼å¯„å­˜å™¨ `"/`

```vim
/hello          " æœç´¢ "hello" â†’ å­˜å‚¨æ¨¡å¼åˆ° "/
:echo @/        " æ˜¾ç¤ºå½“å‰æœç´¢æ¨¡å¼
"/p             " ç²˜è´´æœç´¢æ¨¡å¼
:let @/="world" " ä¿®æ”¹æœç´¢æ¨¡å¼ä¸º "world"
```

#### é»‘æ´å¯„å­˜å™¨ `"_` 

```vim
" ä¸¢å¼ƒæ“ä½œï¼Œä¸å½±å“å…¶ä»–å¯„å­˜å™¨
"ayy            " å…ˆå¤åˆ¶é‡è¦å†…å®¹åˆ°å¯„å­˜å™¨a
"_dd            " åˆ é™¤ä¸éœ€è¦çš„è¡Œï¼Œä¸è¦†ç›–å¯„å­˜å™¨a  
"ap             " ç²˜è´´ä¹‹å‰ä¿å­˜çš„é‡è¦å†…å®¹
```

**ğŸ¯ é»‘æ´å¯„å­˜å™¨ä½¿ç”¨åœºæ™¯:**
- åˆ é™¤åƒåœ¾å†…å®¹æ—¶ä¿æŠ¤æœ‰ç”¨å¯„å­˜å™¨
- é‡æ„ä»£ç æ—¶é¿å…å¯„å­˜å™¨æ±¡æŸ“
- å®å½•åˆ¶æ—¶æ’é™¤ä¸å¿…è¦çš„å†…å®¹

---

## âš™ï¸ æ“ä½œæ¨¡å¼ä¸è¯­æ³•

### è¯­æ³•ç»“æ„åˆ†æ

Vimå¯„å­˜å™¨æ“ä½œéµå¾ªæ¸…æ™°çš„è¯­æ³•æ¨¡å¼ï¼š

```
[å¯„å­˜å™¨æŒ‡å®š] + [æ“ä½œç¬¦] + [èŒƒå›´/æ–‡æœ¬å¯¹è±¡]
     â†“           â†“          â†“
   "a          y         iw
æŒ‡å®šå¯„å­˜å™¨a    å¤åˆ¶æ“ä½œ    å½“å‰å•è¯
```

### ä¸‰ç§åŸºæœ¬æ“ä½œæ¨¡å¼

#### æ¨¡å¼1: å¯„å­˜å™¨ + æ“ä½œç¬¦

```vim
" è¯­æ³•: "[å¯„å­˜å™¨][æ“ä½œç¬¦]
"ayy        " å¤åˆ¶å½“å‰è¡Œåˆ°å¯„å­˜å™¨a
"bdd        " åˆ é™¤å½“å‰è¡Œåˆ°å¯„å­˜å™¨b  
"cS         " åˆ é™¤æ•´è¡Œå¹¶è¿›å…¥æ’å…¥æ¨¡å¼ï¼Œå­˜å‚¨åˆ°å¯„å­˜å™¨c
```

#### æ¨¡å¼2: å¯„å­˜å™¨ + æ“ä½œç¬¦ + åŠ¨ä½œ

```vim  
" è¯­æ³•: "[å¯„å­˜å™¨][æ“ä½œç¬¦][åŠ¨ä½œ]
"ayw        " å¤åˆ¶ä¸€ä¸ªå•è¯åˆ°å¯„å­˜å™¨a
"bd}        " åˆ é™¤åˆ°æ®µè½ç»“å°¾ï¼Œå­˜å‚¨åˆ°å¯„å­˜å™¨b
"cy$        " å‰ªåˆ‡åˆ°è¡Œå°¾ï¼Œå­˜å‚¨åˆ°å¯„å­˜å™¨c
```

#### æ¨¡å¼3: å¯è§†æ¨¡å¼é€‰æ‹© + å¯„å­˜å™¨æ“ä½œ

```vim
" è¯­æ³•: [é€‰æ‹©æ–‡æœ¬] + "[å¯„å­˜å™¨][æ“ä½œç¬¦]
v2j"ay      " é€‰æ‹©2è¡Œï¼Œå¤åˆ¶åˆ°å¯„å­˜å™¨a
V"bd        " é€‰æ‹©æ•´è¡Œï¼Œåˆ é™¤åˆ°å¯„å­˜å™¨b
<C-v>3l"cy  " åˆ—é€‰æ‹©ï¼Œå‰ªåˆ‡åˆ°å¯„å­˜å™¨c
```

### ç²˜è´´æ“ä½œçš„å¤šç§å½¢å¼

#### æ™®é€šæ¨¡å¼ç²˜è´´

```vim
"ap         " åœ¨å…‰æ ‡åç²˜è´´å¯„å­˜å™¨a
"aP         " åœ¨å…‰æ ‡å‰ç²˜è´´å¯„å­˜å™¨a  
"a]p        " ç²˜è´´å¹¶è‡ªåŠ¨è°ƒæ•´ç¼©è¿›
"a[p        " ç²˜è´´å¹¶å‡å°‘ç¼©è¿›
```

#### æ’å…¥æ¨¡å¼ç²˜è´´

```vim
" åœ¨æ’å…¥æ¨¡å¼ä¸­æŒ‰ <C-r> ç„¶åæŒ‡å®šå¯„å­˜å™¨
i<C-r>a     " æ’å…¥å¯„å­˜å™¨açš„å†…å®¹
i<C-r>"     " æ’å…¥æœªå‘½åå¯„å­˜å™¨å†…å®¹  
i<C-r>+     " æ’å…¥ç³»ç»Ÿå‰ªè´´æ¿å†…å®¹
```

#### å‘½ä»¤è¡Œæ¨¡å¼ç²˜è´´

```vim
" åœ¨å‘½ä»¤è¡Œä¸­æŒ‰ <C-r> ç„¶åæŒ‡å®šå¯„å­˜å™¨
:echo "<C-r>a"      " æ’å…¥å¯„å­˜å™¨açš„å†…å®¹åˆ°å‘½ä»¤è¡Œ
:edit <C-r>%        " æ’å…¥å½“å‰æ–‡ä»¶è·¯å¾„
```

### é«˜çº§æ“ä½œæŠ€å·§

#### å¯„å­˜å™¨å†…å®¹æ“ä½œ

```vim
" æŸ¥çœ‹å¯„å­˜å™¨å†…å®¹
:reg            " æŸ¥çœ‹æ‰€æœ‰éç©ºå¯„å­˜å™¨
:reg a b c      " æŸ¥çœ‹æŒ‡å®šå¯„å­˜å™¨  
:reg "0-9       " æŸ¥çœ‹æ•°å­—å¯„å­˜å™¨

" é€šè¿‡å˜é‡è®¿é—®å¯„å­˜å™¨
:echo @a        " æ˜¾ç¤ºå¯„å­˜å™¨açš„å†…å®¹
:let @a = "new content"  " è®¾ç½®å¯„å­˜å™¨açš„å†…å®¹
:let @a = @a . " appended"  " è¿½åŠ å†…å®¹åˆ°å¯„å­˜å™¨a
```

#### å¯„å­˜å™¨å†…å®¹è½¬æ¢

```vim
" å°†å¯„å­˜å™¨å†…å®¹è½¬ä¸ºå¤§å†™
:let @a = toupper(@a)
" å°†å¯„å­˜å™¨å†…å®¹è½¬ä¸ºå°å†™  
:let @a = tolower(@a)
" å»é™¤é¦–å°¾ç©ºç™½
:let @a = trim(@a)
" æ›¿æ¢å†…å®¹
:let @a = substitute(@a, 'old', 'new', 'g')
```

---

## ğŸª å®æˆ˜åº”ç”¨åœºæ™¯

### åœºæ™¯1: ä»£ç é‡æ„ä¸é‡ç»„

#### å‡½æ•°å®šä¹‰æ”¶é›†ä¸é‡æ’

```vim
" ç›®æ ‡: ä»å¤§æ–‡ä»¶ä¸­æå–æ‰€æœ‰å‡½æ•°å®šä¹‰
" æ­¥éª¤1: æ¸…ç©ºæ”¶é›†å¯„å­˜å™¨
:let @f = ""

" æ­¥éª¤2: æœç´¢å¹¶æ”¶é›†å‡½æ•°
/^function\|^def\|^func     " æœç´¢å‡½æ•°å®šä¹‰æ¨¡å¼
n                           " è·³åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…
"Fyy                        " è¿½åŠ å¤åˆ¶åˆ°å¯„å­˜å™¨f
n                           " ä¸‹ä¸€ä¸ªåŒ¹é…  
"Fyy                        " ç»§ç»­è¿½åŠ 
" ... é‡å¤ç›´åˆ°æ‰€æœ‰å‡½æ•°æ”¶é›†å®Œæ¯•

" æ­¥éª¤3: åœ¨æ–°ä½ç½®ç²˜è´´æ‰€æœ‰å‡½æ•°
G                           " åˆ°æ–‡ä»¶æœ«å°¾
o<Esc>                      " æ–°å»ºç©ºè¡Œ
"fp                         " ç²˜è´´æ‰€æœ‰æ”¶é›†çš„å‡½æ•°
```

#### å˜é‡å£°æ˜æ‰¹é‡å¤„ç†

```vim
" åœºæ™¯: å°†å±€éƒ¨å˜é‡å£°æ˜ç§»åŠ¨åˆ°æ–‡ä»¶é¡¶éƒ¨
" æ­¥éª¤1: æœç´¢å˜é‡å£°æ˜æ¨¡å¼
/let\s\+\w\+\s*=           " æœç´¢ let å£°æ˜

" æ­¥éª¤2: æ”¶é›†å˜é‡å£°æ˜
"vdd                        " åˆ é™¤å£°æ˜åˆ°å¯„å­˜å™¨v
n                           " ä¸‹ä¸€ä¸ªåŒ¹é…
"Vdd                        " è¿½åŠ åˆ é™¤åˆ°å¯„å­˜å™¨v
" ... é‡å¤æ”¶é›†

" æ­¥éª¤3: åœ¨é¡¶éƒ¨æ‰¹é‡ç²˜è´´
gg                          " åˆ°æ–‡ä»¶é¡¶éƒ¨
o<Esc>                      " æ–°å»ºç©ºè¡Œ  
"vp                         " ç²˜è´´æ‰€æœ‰å˜é‡å£°æ˜
```

### åœºæ™¯2: æ–‡æ¡£ç¼–å†™ä¸æ•´ç†

#### ä»£ç ç¤ºä¾‹ç®¡ç†

```vim
" åœ¨ç¼–å†™æŠ€æœ¯æ–‡æ¡£æ—¶ç®¡ç†ä»£ç ç¤ºä¾‹
" ç¤ºä¾‹1: ä¿å­˜åˆ°å¯„å­˜å™¨e1
"e1yy        " å¤åˆ¶ç¤ºä¾‹ä»£ç 

" ç¤ºä¾‹2: ä¿å­˜åˆ°å¯„å­˜å™¨e2  
"e2yy        " å¤åˆ¶å¦ä¸€ä¸ªç¤ºä¾‹

" åœ¨æ–‡æ¡£ä¸­ä½¿ç”¨
/```javascript     " å®šä½åˆ°ä»£ç å—
"e1p               " ç²˜è´´ç¤ºä¾‹1
/```python        " å®šä½åˆ°å¦ä¸€ä¸ªä»£ç å—
"e2p               " ç²˜è´´ç¤ºä¾‹2
```

#### æ¨¡æ¿å†…å®¹ç®¡ç†

```vim
" è®¾ç½®å¸¸ç”¨æ¨¡æ¿åˆ°å¯„å­˜å™¨
:let @h = "# Title\n\n## Overview\n\n## Details\n\n## Examples\n"
:let @c = "/**\n * @description \n * @param {type} name - description\n * @returns {type} description\n */"

" ä½¿ç”¨æ¨¡æ¿
o<Esc>"hp      " æ’å…¥æ–‡æ¡£æ¨¡æ¿
o<Esc>"cp      " æ’å…¥æ³¨é‡Šæ¨¡æ¿
```

### åœºæ™¯3: æ•°æ®å¤„ç†ä¸è½¬æ¢

#### CSVæ•°æ®åˆ—æå–

```vim
" ä»CSVæ•°æ®ä¸­æå–ç‰¹å®šåˆ—
" åŸæ•°æ®ç¤ºä¾‹:
" name,age,city,salary  
" John,25,NYC,50000
" Jane,30,LA,60000

" æå–å§“ååˆ— (ç¬¬1åˆ—)
:%s/\([^,]*\),.*$/\1/    " æ­£åˆ™æ›¿æ¢ä¿ç•™ç¬¬ä¸€åˆ—
" ç»“æœå­˜å‚¨åˆ°å¯„å­˜å™¨n
ggVG"ny

" æ’¤é”€å¹¶æå–å·¥èµ„åˆ— (ç¬¬4åˆ—)  
u
:%s/^[^,]*,[^,]*,[^,]*,\([^,]*\)$/\1/  " ä¿ç•™ç¬¬å››åˆ—
ggVG"sy     " å­˜å‚¨åˆ°å¯„å­˜å™¨s
```

#### JSONæ•°æ®æå–

```vim
" ä»JSONä¸­æå–ç‰¹å®šå­—æ®µå€¼
" åŸæ•°æ®: {"name": "John", "age": 25, "city": "NYC"}

" æå–æ‰€æœ‰nameå­—æ®µçš„å€¼
:%s/.*"name"\s*:\s*"\([^"]*\)".*/\1/
ggVG"ny     " å­˜å‚¨å§“ååˆ°å¯„å­˜å™¨n

" æ’¤é”€å¹¶æå–ageå­—æ®µ
u  
:%s/.*"age"\s*:\s*\([0-9]*\).*/\1/
ggVG"ay     " å­˜å‚¨å¹´é¾„åˆ°å¯„å­˜å™¨a
```

### åœºæ™¯4: å¤šæ–‡ä»¶åä½œç¼–è¾‘

#### æ–‡ä»¶é—´å†…å®¹ä¼ è¾“

```vim
" æ–‡ä»¶Aä¸­å¤åˆ¶é‡è¦å‡½æ•°
"fyi}        " å¤åˆ¶æ•´ä¸ªå‡½æ•°åˆ°å¯„å­˜å™¨f

" åˆ‡æ¢åˆ°æ–‡ä»¶B
:e fileB.js
" ç²˜è´´å‡½æ•°å¹¶ä¿®æ”¹
G"fp        " åœ¨æœ«å°¾ç²˜è´´å‡½æ•°
```

#### é…ç½®æ–‡ä»¶åŒæ­¥

```vim  
" ä»ä¸»é…ç½®æ–‡ä»¶å¤åˆ¶è®¾ç½®
" åœ¨ .vimrc ä¸­
/^set.*clipboard    " æ‰¾åˆ°å‰ªè´´æ¿è®¾ç½®
"cy$                 " å¤åˆ¶è®¾ç½®åˆ°å¯„å­˜å™¨c

" åœ¨é¡¹ç›®çš„ .exrc ä¸­åº”ç”¨
:e .exrc
G"cp                " ç²˜è´´é…ç½®
```

---

## ğŸš€ é«˜çº§æŠ€å·§ä¸æœ€ä½³å®è·µ

### å¯„å­˜å™¨ä¸å®çš„ç»“åˆä½¿ç”¨

#### åŠ¨æ€å®ç”Ÿæˆ

```vim
" åœºæ™¯: æ ¹æ®å½“å‰è¡Œå†…å®¹ç”Ÿæˆä¸åŒçš„å®
" å½“å‰è¡Œ: console.log("debug: variable_name");

" æå–å˜é‡ååˆ°å¯„å­˜å™¨
:let @v = matchstr(getline('.'), 'console\.log.*\zs\w\+\ze')

" ç”ŸæˆåŒ…å«å˜é‡åçš„å®
:let @m = 'yiwoconsole.log("debug: " + ' . @v . ', ' . @v . ');<Esc>'

" æ‰§è¡ŒåŠ¨æ€ç”Ÿæˆçš„å®
@m
```

#### å®é“¾å¼æ‰§è¡Œ

```vim
" åˆ›å»ºå®é“¾: å®aè°ƒç”¨å®b, å®bè°ƒç”¨å®c
:let @a = 'dd@b'          " å®a: åˆ é™¤è¡Œå¹¶æ‰§è¡Œå®b  
:let @b = 'yyp@c'         " å®b: å¤åˆ¶è¡Œå¹¶æ‰§è¡Œå®c
:let @c = '^i// <Esc>$'   " å®c: åœ¨è¡Œé¦–æ·»åŠ æ³¨é‡Š

" æ‰§è¡Œå®é“¾
@a      " åˆ é™¤->å¤åˆ¶->æ·»åŠ æ³¨é‡Š çš„ç»„åˆæ“ä½œ
```

### å¯„å­˜å™¨å†…å®¹çš„é«˜çº§æ“ä½œ

#### å¯„å­˜å™¨å†…å®¹æ’åº

```vim
" å°†å¯„å­˜å™¨aä¸­çš„è¡Œè¿›è¡Œæ’åº
:let @a = join(sort(split(@a, '\n')), '\n')
"ap     " ç²˜è´´æ’åºåçš„å†…å®¹
```

#### å¯„å­˜å™¨å†…å®¹å»é‡

```vim
" å»é™¤å¯„å­˜å™¨ä¸­çš„é‡å¤è¡Œ
:let @a = join(uniq(sort(split(@a, '\n'))), '\n')
"ap     " ç²˜è´´å»é‡åçš„å†…å®¹
```

#### å¯„å­˜å™¨å†…å®¹ç»Ÿè®¡

```vim
" ç»Ÿè®¡å¯„å­˜å™¨ä¸­çš„è¡Œæ•°
:echo len(split(@a, '\n'))

" ç»Ÿè®¡å¯„å­˜å™¨ä¸­çš„å•è¯æ•°
:echo len(split(@a, '\s\+'))

" ç»Ÿè®¡å¯„å­˜å™¨ä¸­çš„å­—ç¬¦æ•°  
:echo len(@a)
```

### æ¡ä»¶æ€§å¯„å­˜å™¨æ“ä½œ

#### åŸºäºå†…å®¹é€‰æ‹©å¯„å­˜å™¨

```vim
" æ ¹æ®å½“å‰è¡Œå†…å®¹å†³å®šä½¿ç”¨å“ªä¸ªå¯„å­˜å™¨
function! SmartYank()
    let line = getline('.')
    if line =~ '^function'
        normal! "fyy
        echo "Function copied to register f"
    elseif line =~ '^class'  
        normal! "cyy
        echo "Class copied to register c"
    else
        normal! yy
        echo "Line copied to default register"
    endif
endfunction

" ç»‘å®šåˆ°å¿«æ·é”®
nnoremap <leader>y :call SmartYank()<CR>
```

#### æ™ºèƒ½ç²˜è´´é€‰æ‹©

```vim
" æ ¹æ®ä¸Šä¸‹æ–‡æ™ºèƒ½é€‰æ‹©è¦ç²˜è´´çš„å†…å®¹
function! SmartPaste()
    let context = getline('.')
    if context =~ 'import\|require'
        " åœ¨å¯¼å…¥è¯­å¥é™„è¿‘ï¼Œç²˜è´´æ¨¡å—å¯„å­˜å™¨
        normal! "mp
    elseif context =~ 'function.*{$'
        " åœ¨å‡½æ•°ä½“å†…ï¼Œç²˜è´´ä»£ç ç‰‡æ®µå¯„å­˜å™¨
        normal! "cp  
    else
        " é»˜è®¤ç²˜è´´
        normal! p
    endif
endfunction

nnoremap <leader>p :call SmartPaste()<CR>
```

### å¯„å­˜å™¨æŒä¹…åŒ–æ–¹æ¡ˆ

#### ä¼šè¯é—´å¯„å­˜å™¨ä¿æŒ

```vim
" åœ¨ .vimrc ä¸­æ·»åŠ 
" ä¿å­˜å¯„å­˜å™¨å†…å®¹åˆ°æ–‡ä»¶
function! SaveRegisters()
    let reg_file = expand('~/.vim_registers')
    let reg_data = {}
    
    " ä¿å­˜å‘½åå¯„å­˜å™¨a-z
    for i in range(26)
        let reg_name = nr2char(97 + i)  " a-z
        let reg_data[reg_name] = getreg(reg_name)
    endfor
    
    " ä¿å­˜åˆ°æ–‡ä»¶
    call writefile([string(reg_data)], reg_file)
endfunction

" ä»æ–‡ä»¶æ¢å¤å¯„å­˜å™¨å†…å®¹
function! LoadRegisters()
    let reg_file = expand('~/.vim_registers')
    if filereadable(reg_file)
        let reg_data = eval(readfile(reg_file)[0])
        for [reg_name, reg_content] in items(reg_data)
            call setreg(reg_name, reg_content)
        endfor
    endif
endfunction

" è‡ªåŠ¨æ‰§è¡Œ
autocmd VimLeave * call SaveRegisters()
autocmd VimEnter * call LoadRegisters()
```

#### é¡¹ç›®ç‰¹å®šå¯„å­˜å™¨

```vim
" ä¸ºä¸åŒé¡¹ç›®ç»´æŠ¤ä¸åŒçš„å¯„å­˜å™¨é›†åˆ
function! LoadProjectRegisters()
    let project_root = finddir('.git/..', expand('%:p:h').';')
    let reg_file = project_root . '/.vim_project_registers'
    
    if filereadable(reg_file)
        let reg_data = eval(readfile(reg_file)[0])
        for [reg_name, reg_content] in items(reg_data)
            call setreg(reg_name, reg_content)
        endfor
        echo "Project registers loaded"
    endif
endfunction

" åœ¨è¿›å…¥é¡¹ç›®ç›®å½•æ—¶è‡ªåŠ¨åŠ è½½
autocmd BufEnter * call LoadProjectRegisters()
```

### æ€§èƒ½ä¼˜åŒ–æŠ€å·§

#### å¤§å†…å®¹å¯„å­˜å™¨å¤„ç†

```vim
" å¤„ç†å¤§æ–‡ä»¶æ—¶é¿å…å¯„å­˜å™¨æº¢å‡º
" è®¾ç½®æœ€å¤§å¯„å­˜å™¨å¤§å°é™åˆ¶
set viminfo='20,<50,s10,h

" å¯¹äºè¶…å¤§å†…å®¹ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶
function! YankToFile(filename)
    execute 'write! ' . a:filename
    echo "Content saved to " . a:filename
endfunction

command! -nargs=1 YankFile call YankToFile(<f-args>)
" ä½¿ç”¨: :YankFile /tmp/large_content.txt
```

#### å¯„å­˜å™¨æ¸…ç†

```vim
" æ¸…ç†æ‰€æœ‰ç”¨æˆ·å¯„å­˜å™¨
function! ClearUserRegisters()
    for i in range(26)
        let reg_name = nr2char(97 + i)  " a-z
        call setreg(reg_name, "")
    endfor
    echo "All user registers cleared"
endfunction

command! ClearRegs call ClearUserRegisters()
```

---

## ğŸ”§ æ•…éšœæ’é™¤ä¸å¸¸è§é—®é¢˜

### å¸¸è§é—®é¢˜è¯Šæ–­

#### é—®é¢˜1: ç³»ç»Ÿå‰ªè´´æ¿ä¸å·¥ä½œ

**ç—‡çŠ¶:** `"+y` å’Œ `"*y` æ— æ•ˆï¼Œ`:reg +` æ˜¾ç¤ºä¸ºç©º

**è¯Šæ–­æ­¥éª¤:**
```vim
" 1. æ£€æŸ¥å‰ªè´´æ¿æ”¯æŒ
:echo has('clipboard')
" è¿”å› 0 è¡¨ç¤ºä¸æ”¯æŒï¼Œ1 è¡¨ç¤ºæ”¯æŒ

" 2. æ£€æŸ¥Vimç‰ˆæœ¬ä¿¡æ¯
:version
" æŸ¥çœ‹ +clipboard æˆ– -clipboard

" 3. æ£€æŸ¥å…·ä½“çš„å‰ªè´´æ¿æä¾›è€…
:echo has('clipboard_working')
```

**è§£å†³æ–¹æ¡ˆ:**
```bash
# Ubuntu/Debian ç³»ç»Ÿ
sudo apt-get install vim-gtk3
# æˆ–
sudo apt-get install vim-athena

# CentOS/RHEL ç³»ç»Ÿ  
sudo yum install vim-X11
# æˆ–
sudo dnf install vim-X11

# macOS ç³»ç»Ÿ
brew install vim
# æˆ–é‡æ–°ç¼–è¯‘vimæ—¶åŠ ä¸Š --enable-clipboard
```

#### é—®é¢˜2: å¯„å­˜å™¨å†…å®¹æ„å¤–ä¸¢å¤±

**ç—‡çŠ¶:** ä¿å­˜åˆ°å‘½åå¯„å­˜å™¨çš„å†…å®¹çªç„¶æ¶ˆå¤±

**å¸¸è§åŸå› åˆ†æ:**
```vim
" åŸå› 1: æ„å¤–ä½¿ç”¨äº†å°å†™å¯„å­˜å™¨è¦†ç›–
"ayy        " ä¿å­˜é‡è¦å†…å®¹
" ... å…¶ä»–æ“ä½œ
"add        " æ„å¤–è¦†ç›–äº†å¯„å­˜å™¨a

" è§£å†³: ä½¿ç”¨å¤§å†™å¯„å­˜å™¨è¿½åŠ æ¨¡å¼
"ayy        " åˆå§‹ä¿å­˜
"Add        " åç»­ä½¿ç”¨è¿½åŠ æ¨¡å¼ï¼Œé¿å…è¦†ç›–
```

**é¢„é˜²æªæ–½:**
```vim
" åœ¨.vimrcä¸­æ·»åŠ å¯„å­˜å™¨ä¿æŠ¤
function! ProtectedRegister(reg)
    if !empty(getreg(a:reg))
        let choice = confirm('Register ' . a:reg . ' is not empty. Overwrite?', 
                           \ "&Yes\n&No\n&Append", 2)
        if choice == 2
            return 0  " å–æ¶ˆæ“ä½œ
        elseif choice == 3
            " è½¬æ¢ä¸ºå¤§å†™è¿½åŠ æ¨¡å¼
            return toupper(a:reg)
        endif
    endif
    return a:reg
endfunction
```

#### é—®é¢˜3: æ’å…¥æ¨¡å¼ä¸‹ Ctrl-R æ— å“åº”

**ç—‡çŠ¶:** åœ¨æ’å…¥æ¨¡å¼ä¸‹æŒ‰ `<C-r>` æ²¡æœ‰ååº”

**è¯Šæ–­æ£€æŸ¥:**
```vim
" æ£€æŸ¥æ˜¯å¦æœ‰æŒ‰é”®æ˜ å°„å†²çª
:imap <C-r>

" æ£€æŸ¥æ’å…¥æ¨¡å¼æ˜¯å¦æ­£å¸¸
:echo mode()  " åº”è¯¥æ˜¾ç¤º 'i'
```

**è§£å†³æ–¹æ¡ˆ:**
```vim
" å¦‚æœæœ‰å†²çªæ˜ å°„ï¼Œå¯ä»¥ä¸´æ—¶å–æ¶ˆ
:iunmap <C-r>

" æˆ–è€…ä½¿ç”¨æ›¿ä»£æ–¹æ³•
" é€€å‡ºæ’å…¥æ¨¡å¼ï¼Œä½¿ç”¨æ™®é€šæ¨¡å¼ç²˜è´´
<Esc>"ap i
```

### è°ƒè¯•æŠ€å·§

#### å¯„å­˜å™¨çŠ¶æ€ç›‘æ§

```vim
" åˆ›å»ºå¯„å­˜å™¨ç›‘æ§å‡½æ•°
function! RegStatus()
    echo "=== Register Status ==="
    echo "Default (\"\"):  " . string(@")
    echo "Yank (0):       " . string(@0)  
    echo "Delete (1):     " . string(@1)
    echo "Small (-):      " . string(@-)
    echo "System (+):     " . string(@+)
    echo "Selection (*):  " . string(@*)
    echo "File (%):       " . string(@%)
    echo "Command (:):    " . string(@:)
    echo "Last insert (.): " . string(@.)
    echo "Search (/):     " . string(@/)
endfunction

command! RegStatus call RegStatus()
" ä½¿ç”¨: :RegStatus
```

#### æ“ä½œå†å²è¿½è¸ª

```vim
" è®°å½•å¯„å­˜å™¨æ“ä½œå†å²
let g:register_history = []

function! TrackRegisterOp(op, reg)
    let entry = {
        \ 'time': strftime('%H:%M:%S'),
        \ 'operation': a:op,
        \ 'register': a:reg,
        \ 'content': getreg(a:reg)
        \ }
    call add(g:register_history, entry)
    
    " ä¿æŒå†å²è®°å½•åœ¨åˆç†å¤§å°
    if len(g:register_history) > 50
        call remove(g:register_history, 0, 10)
    endif
endfunction

" æŸ¥çœ‹æ“ä½œå†å²
function! ShowRegisterHistory()
    for entry in g:register_history[-10:]
        echo entry.time . ' ' . entry.operation . ' "' . entry.register . ': ' . 
           \ string(entry.content)[0:50] . '...'
    endfor
endfunction

command! RegHistory call ShowRegisterHistory()
```

### æœ€ä½³å®è·µå»ºè®®

#### 1. å¯„å­˜å™¨å‘½åè§„èŒƒ

å»ºè®®é‡‡ç”¨è¯­ä¹‰åŒ–çš„å¯„å­˜å™¨å‘½å:

```vim
" åŠŸèƒ½æ€§å‘½åçº¦å®š
let @f = ""  " f: functions (å‡½æ•°)
let @c = ""  " c: classes (ç±»)  
let @i = ""  " i: imports (å¯¼å…¥)
let @v = ""  " v: variables (å˜é‡)
let @d = ""  " d: documentation (æ–‡æ¡£)
let @t = ""  " t: tests (æµ‹è¯•)
let @u = ""  " u: urls (é“¾æ¥)
let @s = ""  " s: snippets (ä»£ç ç‰‡æ®µ)
```

#### 2. å·¥ä½œæµç¨‹æ ‡å‡†åŒ–

```vim
" æ ‡å‡†å·¥ä½œæµç¨‹å®å®šä¹‰
:let @prep = 'gg=G'                    " p: æ ¼å¼åŒ–å‡†å¤‡
:let @backup = 'ggVG"by'               " b: å…¨æ–‡å¤‡ä»½
:let @restore = '"bp'                  " æ¢å¤å¤‡ä»½
:let @clean = ':let @a=""|let @b=""|let @c=""<CR>'  " æ¸…ç†å¯„å­˜å™¨
```

#### 3. é”™è¯¯æ¢å¤ç­–ç•¥

```vim
" å»ºç«‹å¤šå±‚æ¬¡å¤‡ä»½
function! SafeEdit()
    " å±‚æ¬¡1: è‡ªåŠ¨å¤‡ä»½åˆ°å¯„å­˜å™¨b
    normal! ggVG"by
    
    " å±‚æ¬¡2: ä¿å­˜åˆ°ä¸´æ—¶æ–‡ä»¶
    let temp_file = tempname()
    execute 'write ' . temp_file
    echo "Backup saved to: " . temp_file
    
    " å±‚æ¬¡3: è®°å½•æ“ä½œç‚¹
    let g:edit_checkpoint = getpos('.')
endfunction

function! SafeRestore()
    " ä»å¯„å­˜å™¨æ¢å¤
    normal! ggVG"bp
    " æ¢å¤å…‰æ ‡ä½ç½®  
    call setpos('.', g:edit_checkpoint)
endfunction

nnoremap <leader>s :call SafeEdit()<CR>
nnoremap <leader>r :call SafeRestore()<CR>
```

---

## ğŸ“š å‚è€ƒèµ„æ–™ä¸æ‰©å±•

### å®˜æ–¹æ–‡æ¡£å‚è€ƒ

#### æ ¸å¿ƒæ–‡æ¡£
- `:help registers` - å¯„å­˜å™¨å®Œæ•´å®˜æ–¹æ–‡æ¡£
- `:help clipboard` - å‰ªè´´æ¿é›†æˆè¯´æ˜  
- `:help quote` - å¯„å­˜å™¨å¼•ç”¨è¯­æ³•
- `:help put` - ç²˜è´´å‘½ä»¤è¯¦è§£

#### ç›¸å…³åŠŸèƒ½æ–‡æ¡£
- `:help recording` - å®å½•åˆ¶ä¸å¯„å­˜å™¨å…³ç³»
- `:help viminfo` - ä¼šè¯ä¿¡æ¯ä¿å­˜é…ç½®
- `:help 'clipboard'` - å‰ªè´´æ¿é€‰é¡¹è®¾ç½®

### æ‰©å±•æ’ä»¶æ¨è

#### å¯„å­˜å™¨å¢å¼ºæ’ä»¶

1. **vim-peekaboo** - å¯„å­˜å™¨å†…å®¹é¢„è§ˆ
```vim
Plug 'junegunn/vim-peekaboo'
" åŠŸèƒ½: æŒ‰ " æˆ– @ æ—¶æ˜¾ç¤ºå¯„å­˜å™¨å†…å®¹é¢„è§ˆ
```

2. **vim-yankstack** - å¤åˆ¶å†å²ç®¡ç†
```vim
Plug 'maxbrunsfeld/vim-yankstack'  
" åŠŸèƒ½: å¾ªç¯è®¿é—®å¤åˆ¶å†å²ï¼Œç±»ä¼¼IDEçš„å‰ªè´´æ¿å†å²
```

3. **registers.nvim** (Neovimä¸“ç”¨)
```lua
use "tversteeg/registers.nvim"
-- åŠŸèƒ½: æ›´ç°ä»£åŒ–çš„å¯„å­˜å™¨ç®¡ç†ç•Œé¢
```

#### å‰ªè´´æ¿é›†æˆæ’ä»¶

1. **vim-system-copy**
```vim
Plug 'christoomey/vim-system-copy'
" æä¾› cp å’Œ cv æ“ä½œç¬¦ä¸ç³»ç»Ÿå‰ªè´´æ¿äº¤äº’
```

2. **vim-fakeclip** 
```vim
Plug 'kana/vim-fakeclip'
" åœ¨ä¸æ”¯æŒå‰ªè´´æ¿çš„ç¯å¢ƒä¸­æ¨¡æ‹Ÿå‰ªè´´æ¿åŠŸèƒ½
```

### é…ç½®æ–‡ä»¶æ¨¡æ¿

#### åŸºç¡€é…ç½®æ¨¡æ¿

```vim
" ~/.vimrc ä¸­çš„å¯„å­˜å™¨ç›¸å…³é…ç½®

" å‰ªè´´æ¿è®¾ç½®
if has('clipboard')
    set clipboard=unnamedplus  " ä½¿ç”¨ç³»ç»Ÿå‰ªè´´æ¿
else
    " ä¸æ”¯æŒå‰ªè´´æ¿æ—¶çš„æ›¿ä»£æ–¹æ¡ˆ
    vnoremap <C-c> :w !xclip -selection clipboard<CR><CR>
    nnoremap <C-v> :r !xclip -selection clipboard -o<CR>
endif

" å¯„å­˜å™¨å¿«æ·é”®æ˜ å°„
nnoremap <leader>r :reg<CR>                    " å¿«é€ŸæŸ¥çœ‹å¯„å­˜å™¨
nnoremap <leader>R :reg abcdefghijklmnopqrstuvwxyz<CR>  " æŸ¥çœ‹å‘½åå¯„å­˜å™¨

" å¿«é€Ÿè®¿é—®å¸¸ç”¨å¯„å­˜å™¨
nnoremap <leader>1 "1p   " ç²˜è´´æœ€è¿‘åˆ é™¤
nnoremap <leader>0 "0p   " ç²˜è´´æœ€è¿‘å¤åˆ¶
nnoremap <leader>- "-p   " ç²˜è´´å°åˆ é™¤

" æ™ºèƒ½ç²˜è´´ (è‡ªåŠ¨è°ƒæ•´ç¼©è¿›)
nnoremap <leader>p ]p
nnoremap <leader>P ]P

" å¯„å­˜å™¨å†…å®¹æ“ä½œ
command! RegClear let @a=@b=@c=@d=@e=@f=@g=@h=@i=""
command! RegBackup let @z = @" | echo "Default register backed up to z"
command! RegRestore let @" = @z | echo "Default register restored from z"
```

#### é«˜çº§é…ç½®æ¨¡æ¿

```vim
" é«˜çº§å¯„å­˜å™¨ç®¡ç†é…ç½®

" è‡ªåŠ¨ä¿å­˜é‡è¦å¯„å­˜å™¨
autocmd VimLeave * call SaveImportantRegisters()
autocmd VimEnter * call LoadImportantRegisters()

function! SaveImportantRegisters()
    let important_regs = ['a', 'b', 'c', 'd', 'e']
    let reg_data = {}
    for reg in important_regs
        let reg_data[reg] = getreg(reg)
    endfor
    call writefile([json_encode(reg_data)], expand('~/.vim_important_registers'))
endfunction

function! LoadImportantRegisters()
    let reg_file = expand('~/.vim_important_registers')
    if filereadable(reg_file)
        let reg_data = json_decode(readfile(reg_file)[0])
        for [reg, content] in items(reg_data)
            call setreg(reg, content)
        endfor
    endif
endfunction

" å¯„å­˜å™¨å†…å®¹è½¬æ¢å‡½æ•°
function! RegTransform(reg, func)
    let content = getreg(a:reg)
    if a:func == 'upper'
        call setreg(a:reg, toupper(content))
    elseif a:func == 'lower'  
        call setreg(a:reg, tolower(content))
    elseif a:func == 'reverse'
        call setreg(a:reg, join(reverse(split(content, '\n')), '\n'))
    elseif a:func == 'sort'
        call setreg(a:reg, join(sort(split(content, '\n')), '\n'))
    endif
    echo "Register " . a:reg . " transformed with " . a:func
endfunction

command! -nargs=2 RegTransform call RegTransform(<f-args>)
" ä½¿ç”¨ç¤ºä¾‹: :RegTransform a upper
```

### å­¦ä¹ èµ„æº

#### åœ¨çº¿èµ„æº
- [Vim University - Registers](https://vimuniversity.com/registers)
- [Learn Vimscript the Hard Way - Registers](http://learnvimscriptthehardway.stevelosh.com/)
- [Vim Tips Wiki - Registers](http://vim.wikia.com/wiki/Registers)

#### ç»ƒä¹ å»ºè®®

1. **æ¯æ—¥ç»ƒä¹ ä»»åŠ¡**
   - ç»ƒä¹ ä¸åŒå¯„å­˜å™¨çš„åŸºæœ¬æ“ä½œ
   - å°è¯•ç»„åˆä½¿ç”¨å¯„å­˜å™¨å’Œå…¶ä»–VimåŠŸèƒ½
   - è®°å½•è‡ªå·±çš„å¸¸ç”¨æ“ä½œæ¨¡å¼

2. **è¿›é˜¶æŒ‘æˆ˜**
   - ç¼–å†™è‡ªå·±çš„å¯„å­˜å™¨ç®¡ç†å‡½æ•°
   - åˆ›å»ºé¡¹ç›®ç‰¹å®šçš„å¯„å­˜å™¨å·¥ä½œæµ
   - æ¢ç´¢å¯„å­˜å™¨ä¸å®çš„é«˜çº§ç»„åˆ

3. **å®æˆ˜é¡¹ç›®**
   - åœ¨å®é™…ç¼–ç¨‹é¡¹ç›®ä¸­åº”ç”¨å¯„å­˜å™¨æŠ€å·§
   - å¼€å‘ä¸ªäººåŒ–çš„å¯„å­˜å™¨é…ç½®
   - åˆ†äº«å’Œå­¦ä¹ ä»–äººçš„å¯„å­˜å™¨ä½¿ç”¨æ¨¡å¼

---

## ğŸ¯ æ€»ç»“

Vimå¯„å­˜å™¨ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§è€Œçµæ´»çš„æ–‡æœ¬ç®¡ç†å·¥å…·ã€‚é€šè¿‡æŒæ¡ï¼š

- âœ… **åŸºç¡€æ¦‚å¿µ**: ç†è§£ä¸åŒç±»å‹å¯„å­˜å™¨çš„ç‰¹ç‚¹å’Œç”¨é€”
- âœ… **æ“ä½œè¯­æ³•**: ç†Ÿç»ƒè¿ç”¨å¯„å­˜å™¨æ“ä½œçš„å„ç§è¯­æ³•æ¨¡å¼  
- âœ… **å®æˆ˜æŠ€å·§**: åœ¨çœŸå®åœºæ™¯ä¸­åº”ç”¨å¯„å­˜å™¨è§£å†³é—®é¢˜
- âœ… **é«˜çº§åŠŸèƒ½**: ç»“åˆå®ã€è„šæœ¬ç­‰å®ç°å¤æ‚çš„æ–‡æœ¬æ“ä½œ
- âœ… **æœ€ä½³å®è·µ**: å»ºç«‹æ ‡å‡†åŒ–çš„å·¥ä½œæµç¨‹å’Œé”™è¯¯æ¢å¤æœºåˆ¶

ä½ å°†èƒ½å¤Ÿæ˜¾è‘—æå‡åœ¨Vimä¸­çš„æ–‡æœ¬ç¼–è¾‘æ•ˆç‡ï¼Œè®©å¤æ‚çš„æ–‡æœ¬æ“ä½œå˜å¾—ç®€å•è€Œä¼˜é›…ã€‚

**è®°ä½**: å¯„å­˜å™¨ä¸ä»…ä»…æ˜¯å­˜å‚¨å·¥å…·ï¼Œæ›´æ˜¯æ€ç»´æ–¹å¼çš„ä½“ç°ã€‚é€šè¿‡åˆç†è§„åˆ’å’Œä½¿ç”¨å¯„å­˜å™¨ï¼Œä½ çš„ç¼–è¾‘å·¥ä½œæµå°†å˜å¾—æ›´åŠ æµç•…å’Œé«˜æ•ˆã€‚

---

*æœ¬æ–‡æ¡£æŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿è´¡çŒ®æ”¹è¿›å»ºè®®å’Œå®æˆ˜ç»éªŒåˆ†äº«ã€‚*
